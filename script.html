<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Памятка менеджера «Европлан»</title>
  <style>
    :root {
      --blue: #0050A0;
      --orange: #FF9600;
      --bg: #F7F9FC;
      --gray: #6C7A89;
      --light: #E6E9EF;
      
      --text: #333333;
      --card-bg: #ffffff;
      --border-color: #E6E9EF;
      --shadow-color: rgba(0, 0, 0, 0.1);
    }
    
    [data-theme="dark"] {
      --blue: #2E86DE;
      --orange: #FFA502;
      --bg: #222831;
      --gray: #A4B0BE;
      --light: #393E46;
      
      --text: #EEEEEE;
      --card-bg: #2D3436;
      --border-color: #4A4F57;
      --shadow-color: rgba(0, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 0 0 30px;
      transition: background-color 0.3s, color 0.3s;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    header {
      background-color: var(--card-bg);
      box-shadow: 0 2px 5px var(--shadow-color);
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo-title {
      display: flex;
      align-items: center;
    }

    .logo {
      width: 150px;
      height: 40px;
      margin-right: 20px;
    }
    
    .header-actions {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .action-button,
    .theme-toggle {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s;
      margin-left: 5px;
    }
    
    .action-button:hover,
    .theme-toggle:hover {
      background-color: var(--light);
    }
    
    /* Presentation mode styles */
    body.presentation-mode header {
      padding: 5px 0;
    }
    
    body.presentation-mode .header-actions {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 1000;
      background-color: var(--card-bg);
      border-radius: 50px;
      padding: 5px;
      box-shadow: 0 2px 10px var(--shadow-color);
    }
    
    body.presentation-mode .datetime {
      display: none;
    }
    
    body.presentation-mode section:not(.active-section) {
      display: none;
    }
    
    body.presentation-mode footer {
      display: none;
    }
    
    body.presentation-mode .container {
      max-width: 100%;
      padding: 0;
    }
    
    body.presentation-mode section {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    h1 {
      font-size: 1.6rem;
      color: var(--blue);
    }

    h2 {
      font-size: 1.4rem;
      color: var(--blue);
      margin-bottom: 15px;
      padding-bottom: 5px;
      border-bottom: 2px solid var(--light);
    }

    .datetime {
      font-size: 0.9rem;
      color: var(--gray);
    }

    section {
      background-color: var(--card-bg);
      border-radius: 8px;
      box-shadow: 0 2px 5px var(--shadow-color);
      padding: 20px;
      margin: 20px 0;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    /* Product Features */
    .features {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .feature-card {
      padding: 15px;
      border-radius: 8px;
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    .feature-card:hover {
      box-shadow: 0 5px 15px var(--shadow-color);
      transform: translateY(-2px);
    }

    .feature-icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .feature-title {
      font-weight: bold;
      color: var(--blue);
      margin-bottom: 5px;
    }

    .feature-desc {
      color: var(--gray);
      font-size: 0.9rem;
    }

    /* KPI Cards */
    .kpi-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }

    .kpi-card {
      padding: 15px;
      border-radius: 8px;
      background-color: white;
      border: 1px solid var(--light);
    }

    .kpi-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: var(--blue);
      display: flex;
      justify-content: space-between;
    }

    .kpi-value {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--blue);
      margin: 10px 0;
    }

    .kpi-baseline {
      font-size: 0.8rem;
      color: var(--gray);
    }
    
    .kpi-edit {
      display: none;
      margin: 10px 0;
    }
    
    .kpi-edit.show {
      display: block;
    }
    
    .kpi-target-input {
      width: 60px;
      padding: 5px;
      border: 1px solid var(--light);
      border-radius: 4px;
    }
    
    .edit-toggle {
      font-size: 0.8rem;
      background: none;
      border: none;
      color: var(--blue);
      cursor: pointer;
      padding: 5px 10px;
      margin-left: 10px;
      border-radius: 4px;
    }
    
    .edit-toggle:hover {
      background-color: var(--light);
    }
    
    .kpi-save-container {
      display: none;
      text-align: center;
      margin-top: 15px;
    }
    
    .kpi-save-container.show {
      display: block;
    }
    
    .save-btn {
      background-color: var(--blue);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
    }
    
    .save-btn:hover {
      background-color: #003d7a;
    }

    .progress-container {
      height: 8px;
      background-color: var(--light);
      border-radius: 4px;
      margin: 10px 0;
    }

    .progress-bar {
      height: 8px;
      border-radius: 4px;
      transition: width 1s ease-out;
    }

    .progress-red { background-color: #E74C3C; }
    .progress-yellow { background-color: #F1C40F; }
    .progress-green { background-color: #2ECC71; }

    /* Daily Checklist */
    .checklist {
      list-style: none;
    }

    .checklist-item {
      display: flex;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid var(--light);
    }

    .checklist-item:last-child {
      border-bottom: none;
    }

    .checklist-item input[type="checkbox"] {
      margin-right: 15px;
      width: 18px;
      height: 18px;
    }

    .checklist-item label {
      flex: 1;
      cursor: pointer;
    }

    .checklist-item input[type="checkbox"]:checked + label {
      text-decoration: line-through;
      color: var(--gray);
    }

    /* CORE-7 Accordion */
    .accordion-item {
      border: 1px solid var(--light);
      border-radius: 4px;
      margin-bottom: 10px;
      overflow: hidden;
    }

    .accordion-header {
      padding: 15px;
      background-color: white;
      cursor: pointer;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .accordion-header:hover {
      background-color: var(--light);
    }

    .accordion-content {
      padding: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      background-color: white;
    }

    .accordion-content-inner {
      padding: 15px;
    }

    .accordion-active .accordion-content {
      max-height: 1000px;
    }

    .accordion-icon {
      transition: transform 0.3s ease;
    }

    .accordion-active .accordion-icon {
      transform: rotate(180deg);
    }

    /* Objections Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--light);
      margin-bottom: 20px;
    }

    .tab-button {
      padding: 10px 20px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      font-weight: bold;
      color: var(--gray);
    }

    .tab-button:hover {
      color: var(--blue);
    }

    .tab-button.active {
      color: var(--blue);
      border-bottom: 3px solid var(--orange);
    }

    .tab-content {
      display: none;
      padding: 15px 0;
    }

    .tab-content.active {
      display: block;
    }

    /* TCO Calculator */
    .calculator {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .calculator-inputs {
      flex: 1;
      min-width: 250px;
    }
    
    .calculator-results {
      flex: 1;
      min-width: 250px;
      background-color: var(--light);
      padding: 15px;
      border-radius: 8px;
    }
    
    .calculator-group {
      margin-bottom: 15px;
    }
    
    .calculator-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: var(--blue);
    }
    
    .calculator-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--light);
      border-radius: 4px;
    }
    
    .calculate-btn {
      background-color: var(--blue);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
      margin-top: 10px;
      width: 100%;
    }
    
    .calculate-btn:hover {
      background-color: #003d7a;
    }
    
    .result-item {
      padding: 10px 0;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
    }
    
    .result-item:last-child {
      border-bottom: none;
      font-weight: bold;
      color: var(--blue);
      padding-top: 15px;
    }
    
    .result-label {
      font-weight: 500;
    }
    
    .result-value {
      font-weight: bold;
    }
    
    .highlight {
      background-color: rgba(255, 150, 0, 0.1);
      padding: 10px;
      border-radius: 4px;
      margin-top: 10px;
    }
    
    .calculator-chart-container {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid var(--light);
    }
    
    .visualization-container {
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .visualization {
      width: 100%;
      max-width: 700px;
      height: auto;
      border: 1px solid var(--light);
      border-radius: 8px;
      padding: 10px;
      background-color: white;
    }
    
    .chart-legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px 0;
      flex-wrap: wrap;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
    }
    
    .legend-color {
      display: inline-block;
      width: 15px;
      height: 15px;
      margin-right: 8px;
      border-radius: 3px;
    }
    
    .visualization-hint {
      font-size: 0.9rem;
      color: var(--gray);
      text-align: center;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Quick Links */
    .quick-links {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .quick-link {
      display: flex;
      align-items: center;
      padding: 10px 15px;
      background-color: white;
      border: 1px solid var(--light);
      border-radius: 4px;
      color: var(--blue);
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .quick-link:hover {
      background-color: var(--blue);
      color: white;
    }

    .link-icon {
      margin-right: 10px;
      font-size: 1.2rem;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 20px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      margin-top: 30px;
    }

    .contact-info {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 15px;
    }

    .contact-item {
      display: flex;
      align-items: center;
    }

    .contact-icon {
      margin-right: 5px;
      color: var(--blue);
    }

    .generation-info {
      font-size: 0.8rem;
      color: var(--gray);
    }

    /* Responsive */
    @media (max-width: 600px) {
      .header-content {
        flex-direction: column;
        align-items: flex-start;
      }

      .datetime {
        margin-top: 10px;
      }

      .features {
        grid-template-columns: 1fr;
      }

      .kpi-cards {
        grid-template-columns: 1fr;
      }

      .tabs {
        flex-direction: column;
        border-bottom: none;
      }

      .tab-button {
        border-bottom: 1px solid var(--light);
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo-title">
          <img class="logo" src="logo.svg.png" alt="Европлан логотип">
          <h1>Памятка менеджера — v1.0</h1>
        </div>
        <div class="header-actions">
          <button id="presentation-mode" class="action-button" title="Режим презентации">📺</button>
          <button id="theme-toggle" class="theme-toggle" title="Переключить тему">🌓</button>
          <div class="datetime" id="current-datetime">—</div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- Product Description -->
    <section id="product">
      <h2>Европлан — решение для роста бизнеса</h2>
      <div class="features">
        <div class="feature-card" data-feature="leasing">
          <div class="feature-icon">🚗</div>
          <div class="feature-title">Операционный лизинг</div>
          <div class="feature-desc">До 100 % финансирования без залога ТС.</div>
        </div>
        <div class="feature-card" data-feature="rate">
          <div class="feature-icon">💰</div>
          <div class="feature-title">Ставка ниже кредита</div>
          <div class="feature-desc">Экономия за счёт НДС-вычета и амортизации.</div>
        </div>
        <div class="feature-card" data-feature="schedule">
          <div class="feature-icon">📊</div>
          <div class="feature-title">Гибкий график</div>
          <div class="feature-desc">Balloon, сезонные платежи, плавающая ставка.</div>
        </div>
        <div class="feature-card" data-feature="portal">
          <div class="feature-icon">🌐</div>
          <div class="feature-title">Онлайн-кабинет</div>
          <div class="feature-desc">Договор, счета и ТС-отчёты 24/7 в браузере.</div>
        </div>
      </div>
    </section>

    <!-- KPI Dashboard -->
    <section id="kpi">
      <h2>Ключевые показатели (KPI) <button id="edit-kpi-toggle" class="edit-toggle">✏️ Редактировать цели</button></h2>
      <div class="kpi-cards">
        <div class="kpi-card">
          <div class="kpi-title">
            <span>NVB</span>
            <span>млн ₽</span>
          </div>
          <div class="kpi-value" data-target="14" data-current="0">0</div>
          <div class="kpi-baseline">База: <span class="kpi-base-value">14</span> млн ₽</div>
          <div class="kpi-edit">
            <label>Цель: <input type="number" class="kpi-target-input" data-kpi-id="nvb" value="14" min="0" step="1"></label>
          </div>
          <div class="progress-container">
            <div class="progress-bar" data-base="14" data-min="11" data-max="17"></div>
          </div>
        </div>
        
        <div class="kpi-card">
          <div class="kpi-title">
            <span>Конверсия</span>
            <span>%</span>
          </div>
          <div class="kpi-value" data-target="42" data-current="0">0</div>
          <div class="kpi-baseline">База: <span class="kpi-base-value">42</span> %</div>
          <div class="kpi-edit">
            <label>Цель: <input type="number" class="kpi-target-input" data-kpi-id="conversion" value="42" min="0" max="100" step="1"></label>
          </div>
          <div class="progress-container">
            <div class="progress-bar" data-base="42" data-min="34" data-max="50"></div>
          </div>
        </div>
        
        <div class="kpi-card">
          <div class="kpi-title">
            <span>Lead→Sign</span>
            <span>дни</span>
          </div>
          <div class="kpi-value" data-target="12" data-current="0" data-lower="true">0</div>
          <div class="kpi-baseline">Цель: ≤<span class="kpi-base-value">12</span> дней</div>
          <div class="kpi-edit">
            <label>Цель: <input type="number" class="kpi-target-input" data-kpi-id="leadsign" value="12" min="1" max="30" step="1"></label>
          </div>
          <div class="progress-container">
            <div class="progress-bar" data-base="12" data-min="14" data-max="10" data-lower="true"></div>
          </div>
        </div>
        
        <div class="kpi-card">
          <div class="kpi-title">
            <span>«Флит+»</span>
            <span>%</span>
          </div>
          <div class="kpi-value" data-target="35" data-current="0">0</div>
          <div class="kpi-baseline">База: <span class="kpi-base-value">35</span> %</div>
          <div class="kpi-edit">
            <label>Цель: <input type="number" class="kpi-target-input" data-kpi-id="fleet" value="35" min="0" max="100" step="1"></label>
          </div>
          <div class="progress-container">
            <div class="progress-bar" data-base="35" data-min="28" data-max="40"></div>
          </div>
        </div>
        
        <div class="kpi-card">
          <div class="kpi-title">
            <span>NPS</span>
            <span></span>
          </div>
          <div class="kpi-value" data-target="70" data-current="0">0</div>
          <div class="kpi-baseline">База: <span class="kpi-base-value">70</span></div>
          <div class="kpi-edit">
            <label>Цель: <input type="number" class="kpi-target-input" data-kpi-id="nps" value="70" min="0" max="100" step="1"></label>
          </div>
          <div class="progress-container">
            <div class="progress-bar" data-base="70" data-min="56" data-max="75"></div>
          </div>
        </div>
      </div>
      <div class="kpi-save-container">
        <button id="save-kpi" class="save-btn">Сохранить цели</button>
      </div>
    </section>

    <!-- Daily Checklist -->
    <section id="daily">
      <h2>Ежедневный чек-лист</h2>
      <ul class="checklist">
        <li class="checklist-item">
          <input type="checkbox" id="task1">
          <label for="task1">Self-check целей дня</label>
        </li>
        <li class="checklist-item">
          <input type="checkbox" id="task2">
          <label for="task2">Стендап-15</label>
        </li>
        <li class="checklist-item">
          <input type="checkbox" id="task3">
          <label for="task3">Квалификация лидов</label>
        </li>
        <li class="checklist-item">
          <input type="checkbox" id="task4">
          <label for="task4">Follow-up горячих</label>
        </li>
        <li class="checklist-item">
          <input type="checkbox" id="task5">
          <label for="task5">Обзвон «спящих»</label>
        </li>
        <li class="checklist-item">
          <input type="checkbox" id="task6">
          <label for="task6">Заполнение CRM</label>
        </li>
      </ul>
    </section>

    <!-- CORE-7 Accordion -->
    <section id="core">
      <h2>CORE-7 Скрипт</h2>
      <div class="accordion">
        <div class="accordion-item">
          <div class="accordion-header">
            <span>1. Context</span>
            <span class="accordion-icon">▼</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-content-inner">
              <p>Задайте 2 вопроса о бизнесе клиента и 1 вопрос о текущем парке транспортных средств.</p>
              <p>Например:</p>
              <ul>
                <li>Как давно работаете в этой отрасли?</li>
                <li>Какие ключевые проекты сейчас в работе?</li>
                <li>Сколько транспортных средств в вашем автопарке и какой средний возраст?</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="accordion-item">
          <div class="accordion-header">
            <span>2. Objective</span>
            <span class="accordion-icon">▼</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-content-inner">
              <p>Выясните цели клиента, ожидаемый ROI и сроки.</p>
              <p>Ключевые вопросы:</p>
              <ul>
                <li>Зачем вашему бизнесу нужна эта техника именно сейчас?</li>
                <li>Какую отдачу на инвестиции вы ожидаете?</li>
                <li>В какие сроки нужно ввести технику в эксплуатацию?</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="accordion-item">
          <div class="accordion-header">
            <span>3. Risk</span>
            <span class="accordion-icon">▼</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-content-inner">
              <p>Обсудите риски откладывания решения:</p>
              <ul>
                <li>"Что произойдет, если отложить покупку техники на полгода?"</li>
                <li>"Какие возможности могут быть упущены?"</li>
                <li>"Как это повлияет на операционные расходы и конкурентоспособность?"</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="accordion-item">
          <div class="accordion-header">
            <span>4. Economy</span>
            <span class="accordion-icon">▼</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-content-inner">
              <p>Продемонстрируйте TCO-экономию по сравнению с кредитом:</p>
              <ul>
                <li>Продемонстрируйте выгоды НДС-вычета (20%)</li>
                <li>Покажите эффект ускоренной амортизации</li>
                <li>Суммарная экономия составляет обычно 7-12% от стоимости ТС</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="accordion-item">
          <div class="accordion-header">
            <span>5. Решение графика</span>
            <span class="accordion-icon">▼</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-content-inner">
              <p>Подберите оптимальный график платежей:</p>
              <ul>
                <li><strong>Фиксированная ставка:</strong> надежность и предсказуемость</li>
                <li><strong>Плавающая ставка:</strong> потенциальная экономия при снижении ключевой</li>
                <li><strong>Balloon:</strong> сниженные платежи с остаточным платежом</li>
                <li><strong>Сезонность:</strong> платите меньше в низкий сезон, больше в высокий</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="accordion-item">
          <div class="accordion-header">
            <span>6. Extra value</span>
            <span class="accordion-icon">▼</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-content-inner">
              <p>Предложите дополнительные услуги для создания комплексного решения:</p>
              <ul>
                <li><strong>«Флит+»:</strong> комплексный сервис для автопарка</li>
                <li><strong>Телематика:</strong> мониторинг и оптимизация использования ТС</li>
                <li><strong>Топливные карты:</strong> экономия до 12% на топливе</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="accordion-item">
          <div class="accordion-header">
            <span>7. Next step & Timing</span>
            <span class="accordion-icon">▼</span>
          </div>
          <div class="accordion-content">
            <div class="accordion-content-inner">
              <p>Зафиксируйте следующие шаги и сроки:</p>
              <ul>
                <li>Четко обозначьте, кто что делает до определенной даты</li>
                <li>Зафиксируйте дату следующей встречи/звонка</li>
                <li>Подготовьте документы для подписания</li>
              </ul>
              <p>Пример: "К пятнице я пришлю вам два расчета графика, а от вас нужны документы по компании"</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Objections Tabs -->
    <section id="objections">
      <h2>Работа с возражениями</h2>
      <div class="tabs">
        <button class="tab-button active" data-tab="tab1">Ставка</button>
        <button class="tab-button" data-tab="tab2">Платёж</button>
        <button class="tab-button" data-tab="tab3">Гибкость</button>
      </div>
      
      <div class="tab-content active" id="tab1">
        <h3>«Ставка космическая, подождём падения»</h3>
        <p>При лизинге ставка — лишь верхушка айсберга. С учетом НДС-вычета и ускоренной амортизации фактическая стоимость владения на 7-12% ниже кредита.</p>
        <p>Также доступна опция Re-pricing через 18 месяцев бесплатно — если ставка снизится, мы пересчитаем график.</p>
      </div>
      
      <div class="tab-content" id="tab2">
        <h3>«Большой ежемесячный платёж»</h3>
        <p>Предложите увеличить аванс до 25% или структуру с Balloon 30% в конце срока — нагрузка на cash-flow снижается на 18%.</p>
        <p>Также доступен сезонный график оплаты: летом платежи меньше, когда выручка традиционно ниже.</p>
      </div>
      
      <div class="tab-content" id="tab3">
        <h3>«Нужна гибкость владения»</h3>
        <p>С помощью механизма buy-back через 36 месяцев вы можете обновить парк без необходимости самостоятельной перепродажи и связанных с этим потерь.</p>
        <p>Также портал "Флит+" предоставляет полную информацию о пробеге, сервисе, напоминает о необходимом ТО — экономия времени и снижение риска штрафов.</p>
      </div>
    </section>

    <!-- TCO Calculator -->
    <section id="calculator">
      <h2>TCO-калькулятор</h2>
      <div class="calculator">
        <div class="calculator-inputs">
          <div class="calculator-group">
            <label for="vehicle-cost">Стоимость ТС, ₽:</label>
            <input type="number" id="vehicle-cost" value="1500000" min="0" step="50000">
          </div>
          <div class="calculator-group">
            <label for="lease-term">Срок лизинга, мес:</label>
            <input type="number" id="lease-term" value="36" min="12" max="60" step="12">
          </div>
          <div class="calculator-group">
            <label for="advance-payment">Аванс, %:</label>
            <input type="number" id="advance-payment" value="20" min="0" max="49" step="5">
          </div>
          <div class="calculator-group">
            <label for="lease-rate">Ставка лизинга, %:</label>
            <input type="number" id="lease-rate" value="14.9" min="0" max="30" step="0.1">
          </div>
          <div class="calculator-group">
            <label for="loan-rate">Ставка кредита, %:</label>
            <input type="number" id="loan-rate" value="16.5" min="0" max="30" step="0.1">
          </div>
          <button id="calculate-tco" class="calculate-btn">Рассчитать</button>
        </div>
        <div class="calculator-results">
          <div class="result-item">
            <div class="result-label">Ежемесячный платёж (лизинг):</div>
            <div class="result-value" id="lease-payment">—</div>
          </div>
          <div class="result-item">
            <div class="result-label">Ежемесячный платёж (кредит):</div>
            <div class="result-value" id="loan-payment">—</div>
          </div>
          <div class="result-item">
            <div class="result-label">TCO лизинг:</div>
            <div class="result-value" id="lease-tco">—</div>
          </div>
          <div class="result-item">
            <div class="result-label">TCO кредит:</div>
            <div class="result-value" id="loan-tco">—</div>
          </div>
          <div class="result-item highlight">
            <div class="result-label">Экономия с лизингом:</div>
            <div class="result-value" id="savings">—</div>
          </div>
        </div>
      </div>
      <div class="calculator-chart-container">
        <h3>Сравнение затрат: лизинг vs кредит</h3>
        <div class="visualization-container">
          <object id="cost-comparison" type="image/svg+xml" data="images/cost_comparison.svg" class="visualization"></object>
          <div class="chart-legend">
            <div class="legend-item"><span class="legend-color" style="background-color: var(--blue);"></span> Лизинг (с налоговыми льготами)</div>
            <div class="legend-item"><span class="legend-color" style="background-color: var(--gray);"></span> Кредит (без налоговых льгот)</div>
          </div>
          <p class="visualization-hint">Диаграмма иллюстрирует разницу в стоимости владения между лизингом и кредитом с учетом налоговых преимуществ лизинга.</p>
        </div>
      </div>
    </section>

    <!-- Quick Links -->
    <section id="links">
      <h2>Быстрые ссылки</h2>
      <div class="quick-links">
        <a href="#calculator" class="quick-link">
          <span class="link-icon">📊</span>
          TCO-калькулятор
        </a>
        <a href="#" target="_blank" class="quick-link">
          <span class="link-icon">📄</span>
          Каталог субсидий
        </a>
        <a href="#" target="_blank" class="quick-link">
          <span class="link-icon">❓</span>
          FAQ по ставкам
        </a>
        <a href="#" target="_blank" class="quick-link">
          <span class="link-icon">💼</span>
          CRM-панель
        </a>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="contact-info">
        <div class="contact-item">
          <span class="contact-icon">📞</span>
          <span>8 (800) 250-80-80</span>
        </div>
        <div class="contact-item">
          <span class="contact-icon">✉️</span>
          <span>info@europlan.ru</span>
        </div>
      </div>
      <div class="generation-info">
        Сгенерировано: <span id="generation-date">24 апреля 2025 г.</span>
      </div>
    </footer>
  </div>

  <script>
    // Update Date and Time
    function updateDateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      };
      document.getElementById('current-datetime').textContent = now.toLocaleString('ru-RU', options);
      
      // Update generation date in footer
      const dateOptions = { day: 'numeric', month: 'long', year: 'numeric' };
      document.getElementById('generation-date').textContent = now.toLocaleString('ru-RU', dateOptions);
    }
    
    updateDateTime();
    setInterval(updateDateTime, 60000); // Update every minute

    // KPI Animation
    function animateKPI() {
      const kpiValues = document.querySelectorAll('.kpi-value');
      const progressBars = document.querySelectorAll('.progress-bar');
      
      kpiValues.forEach(value => {
        const target = parseInt(value.dataset.target);
        const current = parseInt(value.dataset.current);
        const isLower = value.dataset.lower === 'true';
        const duration = 1000; // Animation duration in ms
        const step = target / (duration / 16); // 60 FPS (16ms per frame)
        
        let count = current;
        const timer = setInterval(() => {
          count += step;
          if (count >= target) {
            clearInterval(timer);
            count = target;
          }
          value.textContent = Math.round(count);
          value.dataset.current = count;
        }, 16);
      });
      
      progressBars.forEach(bar => {
        const baseValue = parseFloat(bar.dataset.base);
        const minValue = parseFloat(bar.dataset.min);
        const maxValue = parseFloat(bar.dataset.max);
        const isLower = bar.dataset.lower === 'true';
        
        // Set actual value to base value for demonstation, in real scenario this would be the current actual value
        const actual = baseValue;
        let percentage;
        
        if (!isLower) {
          // Normal metrics (higher is better)
          if (actual < minValue) {
            // Below minimum (red zone)
            percentage = (actual / minValue) * 80;
            bar.classList.add('progress-red');
          } else if (actual >= minValue && actual < baseValue) {
            // Between minimum and target (yellow zone)
            percentage = 80 + ((actual - minValue) / (baseValue - minValue)) * 20;
            bar.classList.add('progress-yellow');
          } else {
            // At or above target (green zone)
            percentage = 100 + ((actual - baseValue) / (maxValue - baseValue)) * 20;
            percentage = Math.min(percentage, 120);
            bar.classList.add('progress-green');
          }
        } else {
          // Lower is better metrics (like Lead→Sign days)
          if (actual > minValue) {
            // Above minimum days (red zone - too many days)
            percentage = ((2 * minValue - actual) / minValue) * 80; // Inverted scale
            percentage = Math.max(percentage, 0); // Don't go below 0%
            bar.classList.add('progress-red');
          } else if (actual <= minValue && actual > baseValue) {
            // Between minimum and target days (yellow zone)
            percentage = 80 + ((minValue - actual) / (minValue - baseValue)) * 20;
            bar.classList.add('progress-yellow');
          } else {
            // At or below target days (green zone - fewer days is better)
            percentage = 100 + ((baseValue - actual) / (baseValue - maxValue)) * 20;
            percentage = Math.min(percentage, 120);
            bar.classList.add('progress-green');
          }
        }
        
        setTimeout(() => {
          bar.style.width = percentage + '%';
        }, 200);
      });
    }
    
    // Initialize Checklist from localStorage
    function initChecklist() {
      const checkboxes = document.querySelectorAll('.checklist input[type="checkbox"]');
      const savedTasks = JSON.parse(localStorage.getItem('todos-v1')) || [];
      
      checkboxes.forEach((checkbox, index) => {
        checkbox.checked = savedTasks[index] || false;
        
        checkbox.addEventListener('change', () => {
          const updatedTasks = [];
          document.querySelectorAll('.checklist input[type="checkbox"]').forEach(cb => {
            updatedTasks.push(cb.checked);
          });
          localStorage.setItem('todos-v1', JSON.stringify(updatedTasks));
        });
      });
    }
    
    // Accordion functionality
    function initAccordion() {
      const accordionHeaders = document.querySelectorAll('.accordion-header');
      
      accordionHeaders.forEach(header => {
        header.addEventListener('click', () => {
          const accordionItem = header.parentElement;
          accordionItem.classList.toggle('accordion-active');
        });
      });
    }
    
    // Tabs functionality
    function initTabs() {
      const tabButtons = document.querySelectorAll('.tab-button');
      const tabContents = document.querySelectorAll('.tab-content');
      const savedTab = localStorage.getItem('tab-active') || 'tab1';
      
      // Initialize with saved tab
      activateTab(savedTab);
      
      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          const tabId = button.dataset.tab;
          activateTab(tabId);
          localStorage.setItem('tab-active', tabId);
        });
      });
      
      function activateTab(tabId) {
        tabButtons.forEach(btn => {
          btn.classList.remove('active');
          if (btn.dataset.tab === tabId) {
            btn.classList.add('active');
          }
        });
        
        tabContents.forEach(content => {
          content.classList.remove('active');
          if (content.id === tabId) {
            content.classList.add('active');
          }
        });
      }
    }
    
    // Feature cards click events
    function initFeatureCards() {
      const featureCards = document.querySelectorAll('.feature-card');
      
      featureCards.forEach(card => {
        card.addEventListener('click', () => {
          const featureId = card.dataset.feature;
          console.log(featureId);
        });
      });
    }
    
    // TCO Calculator functionality
    function initTCOCalculator() {
      const calculateButton = document.getElementById('calculate-tco');
      if (!calculateButton) return;
      
      calculateButton.addEventListener('click', function() {
        // Get input values
        const vehicleCost = parseFloat(document.getElementById('vehicle-cost').value);
        const leaseTerm = parseInt(document.getElementById('lease-term').value);
        const advancePayment = parseFloat(document.getElementById('advance-payment').value) / 100;
        const leaseRate = parseFloat(document.getElementById('lease-rate').value) / 100;
        const loanRate = parseFloat(document.getElementById('loan-rate').value) / 100;
        
        // Calculate lease payment
        const advanceAmount = vehicleCost * advancePayment;
        const financedAmount = vehicleCost - advanceAmount;
        const monthlyLeaseRate = leaseRate / 12;
        const leasePayment = financedAmount * (monthlyLeaseRate * Math.pow(1 + monthlyLeaseRate, leaseTerm)) / 
                             (Math.pow(1 + monthlyLeaseRate, leaseTerm) - 1);
        
        // Calculate loan payment
        const monthlyLoanRate = loanRate / 12;
        const loanPayment = vehicleCost * (monthlyLoanRate * Math.pow(1 + monthlyLoanRate, leaseTerm)) / 
                            (Math.pow(1 + monthlyLoanRate, leaseTerm) - 1);
        
        // Calculate TCO for lease (with tax benefits: VAT refund + accelerated depreciation)
        const vatRefund = vehicleCost * 0.20; // 20% VAT refund
        const acceleratedDepreciation = vehicleCost * 0.10; // Estimate 10% benefit from accelerated depreciation
        const leaseTCO = advanceAmount + (leasePayment * leaseTerm) - vatRefund - acceleratedDepreciation;
        
        // Calculate TCO for loan (no tax benefits)
        const loanTCO = loanPayment * leaseTerm;
        
        // Calculate savings
        const savings = loanTCO - leaseTCO;
        const savingsPercent = (savings / loanTCO) * 100;
        
        // Format and update results
        document.getElementById('lease-payment').textContent = formatCurrency(leasePayment) + ' ₽/мес';
        document.getElementById('loan-payment').textContent = formatCurrency(loanPayment) + ' ₽/мес';
        document.getElementById('lease-tco').textContent = formatCurrency(leaseTCO) + ' ₽';
        document.getElementById('loan-tco').textContent = formatCurrency(loanTCO) + ' ₽';
        document.getElementById('savings').textContent = formatCurrency(savings) + ' ₽ (' + 
                                                     savingsPercent.toFixed(1) + '%)';
      });
    }
    
    function formatCurrency(value) {
      return new Intl.NumberFormat('ru-RU').format(Math.round(value));
    }
    
    // KPI Editing functionality
    function initKPIEditing() {
      const editToggle = document.getElementById('edit-kpi-toggle');
      const saveBtn = document.getElementById('save-kpi');
      const kpiEditFields = document.querySelectorAll('.kpi-edit');
      const saveContainer = document.querySelector('.kpi-save-container');
      
      // Load saved KPI values from localStorage if available
      loadKPITargets();
      
      editToggle.addEventListener('click', function() {
        kpiEditFields.forEach(field => {
          field.classList.toggle('show');
        });
        saveContainer.classList.toggle('show');
      });
      
      saveBtn.addEventListener('click', function() {
        // Save all KPI targets
        const targets = {};
        document.querySelectorAll('.kpi-target-input').forEach(input => {
          const kpiId = input.dataset.kpiId;
          const value = parseFloat(input.value);
          targets[kpiId] = value;
          
          // Update the displayed base value
          const card = input.closest('.kpi-card');
          const baseDisplay = card.querySelector('.kpi-base-value');
          baseDisplay.textContent = value;
          
          // Update the progress bar data
          const progressBar = card.querySelector('.progress-bar');
          progressBar.dataset.base = value;
          
          // Update the target for animation
          const kpiValue = card.querySelector('.kpi-value');
          kpiValue.dataset.target = value;
        });
        
        // Save to localStorage
        localStorage.setItem('kpi-targets', JSON.stringify(targets));
        
        // Hide edit fields
        kpiEditFields.forEach(field => {
          field.classList.remove('show');
        });
        saveContainer.classList.remove('show');
        
        // Re-animate with new values
        animateKPI();
        
        // Show confirmation
        alert('KPI цели сохранены!');
      });
    }
    
    function loadKPITargets() {
      const savedTargets = JSON.parse(localStorage.getItem('kpi-targets'));
      if (!savedTargets) return;
      
      document.querySelectorAll('.kpi-target-input').forEach(input => {
        const kpiId = input.dataset.kpiId;
        if (savedTargets[kpiId]) {
          const value = savedTargets[kpiId];
          input.value = value;
          
          // Update the displayed base value
          const card = input.closest('.kpi-card');
          const baseDisplay = card.querySelector('.kpi-base-value');
          baseDisplay.textContent = value;
          
          // Update the progress bar data
          const progressBar = card.querySelector('.progress-bar');
          progressBar.dataset.base = value;
          
          // Update the target for animation
          const kpiValue = card.querySelector('.kpi-value');
          kpiValue.dataset.target = value;
        }
      });
    }
    
    // Theme toggling functionality
    function initThemeToggle() {
      const themeToggle = document.getElementById('theme-toggle');
      const savedTheme = localStorage.getItem('theme');
      
      // Apply saved theme if available
      if (savedTheme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeToggle.textContent = '☀️';
      }
      
      themeToggle.addEventListener('click', function() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        
        if (currentTheme === 'dark') {
          document.documentElement.removeAttribute('data-theme');
          localStorage.setItem('theme', 'light');
          themeToggle.textContent = '🌓';
        } else {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
          themeToggle.textContent = '☀️';
        }
      });
    }
    
    // Presentation mode functionality
    function initPresentationMode() {
      const presentationBtn = document.getElementById('presentation-mode');
      const allSections = document.querySelectorAll('section');
      let currentSectionIndex = 0;
      let isPresentationMode = false;
      
      presentationBtn.addEventListener('click', function() {
        isPresentationMode = !isPresentationMode;
        
        if (isPresentationMode) {
          document.body.classList.add('presentation-mode');
          presentationBtn.textContent = '❌';
          presentationBtn.title = 'Выйти из режима презентации';
          
          // Show only first section initially
          allSections.forEach((section, index) => {
            section.classList.toggle('active-section', index === 0);
          });
          
          // Listen for keyboard navigation
          document.addEventListener('keydown', handleKeydown);
        } else {
          document.body.classList.remove('presentation-mode');
          presentationBtn.textContent = '📺';
          presentationBtn.title = 'Режим презентации';
          
          // Show all sections again
          allSections.forEach(section => {
            section.classList.remove('active-section');
          });
          
          // Remove keyboard listener
          document.removeEventListener('keydown', handleKeydown);
        }
      });
      
      function handleKeydown(event) {
        if (!isPresentationMode) return;
        
        if (event.key === 'ArrowRight' || event.key === 'ArrowDown' || event.key === ' ') {
          // Next slide
          if (currentSectionIndex < allSections.length - 1) {
            allSections[currentSectionIndex].classList.remove('active-section');
            currentSectionIndex++;
            allSections[currentSectionIndex].classList.add('active-section');
            allSections[currentSectionIndex].scrollIntoView({ behavior: 'smooth' });
          }
        } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
          // Previous slide
          if (currentSectionIndex > 0) {
            allSections[currentSectionIndex].classList.remove('active-section');
            currentSectionIndex--;
            allSections[currentSectionIndex].classList.add('active-section');
            allSections[currentSectionIndex].scrollIntoView({ behavior: 'smooth' });
          }
        } else if (event.key === 'Escape') {
          // Exit presentation mode
          presentationBtn.click();
        }
        
        event.preventDefault();
      }
    }
    
    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      animateKPI();
      initChecklist();
      initAccordion();
      initTabs();
      initFeatureCards();
      initTCOCalculator();
      initKPIEditing();
      initThemeToggle();
      initPresentationMode();
    });
  </script>
</body>
</html>
